{"version":3,"file":"widget.min.js","mappings":"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","sources":["webpack://MyPopoutWidget/./src/toratech-widget-cdn.js","webpack://MyPopoutWidget/webpack/bootstrap","webpack://MyPopoutWidget/webpack/runtime/define property getters","webpack://MyPopoutWidget/webpack/runtime/hasOwnProperty shorthand","webpack://MyPopoutWidget/./src/index.js"],"sourcesContent":["/**\n * ToRaTech Chat Widget - CDN Version\n * @version 1.0.0\n * @license MIT\n *\n * Single-file, zero-dependency chat widget for easy CDN distribution\n * Usage: <script src=\"https://cdn.toratech.com/chat/v1/widget.min.js\"></script>\n *\n * Note: Webhook configuration is managed by ToRaTech and cannot be customized.\n * Users can only configure branding, styling, and advanced options.\n */\n\n(function(window, document) {\n  'use strict';\n\n  // Namespace to avoid global conflicts\n  const NAMESPACE = 'ToRaTechChat';\n  const CONFIG_KEY = 'ChatWidgetConfig';\n  const VERSION = '1.0.0';\n  \n  // PROTECTED: Webhook configuration is controlled by ToRaTech and cannot be overridden\n  const TORATECH_WEBHOOK = {\n    url: 'https://luccatora.app.n8n.cloud/webhook/e20c3a9c-8b20-4e47-82c4-61bb7207b07e/chat',\n    route: 'general'\n  };\n\n  // Default configuration (webhook is always hardcoded above)\n  const DEFAULT_CONFIG = {\n    branding: {\n      logo: 'https://cdn.toratech.com/assets/default-logo.png',\n      name: 'ToRaTech Support',\n      welcomeText: 'Hi there! ðŸ‘‹ How can I assist you today?',\n      responseTimeText: 'We typically respond quickly.'\n    },\n    style: {\n      primaryColor: '#338AFF',\n      secondaryColor: '#2072E8',\n      position: 'right',\n      backgroundColor: '#ffffff',\n      fontColor: '#333333'\n    },\n    advanced: {\n      autoInit: true,\n      debug: false,\n      zIndex: 9999,\n      storageKey: 'toratech_chat_prefs',\n      apiVersion: 'v1'\n    }\n  };\n\n  // Embedded styles as template string\n  const WIDGET_STYLES = `\n    /* Critical styles embedded to avoid external CSS dependencies */\n    .toratech-chat-widget {\n      --tt-primary: var(--toratech-primary-color, {{primaryColor}});\n      --tt-secondary: var(--toratech-secondary-color, {{secondaryColor}});\n      --tt-bg: var(--toratech-bg-color, {{backgroundColor}});\n      --tt-text: var(--toratech-text-color, {{fontColor}});\n      --tt-position: {{position}};\n      \n      position: fixed;\n      bottom: 20px;\n      {{positionStyle}}\n      z-index: {{zIndex}};\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    }\n\n    .toratech-chat-widget * {\n      box-sizing: border-box;\n    }\n\n    .toratech-chat-container {\n      width: 380px;\n      height: 600px;\n      background: var(--tt-bg);\n      border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n      display: none;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    .toratech-chat-container.open {\n      display: flex;\n    }\n\n    .toratech-chat-button {\n      width: 60px;\n      height: 60px;\n      border-radius: 30px;\n      background: var(--tt-primary);\n      border: none;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      transition: transform 0.2s;\n    }\n\n    .toratech-chat-button:hover {\n      transform: scale(1.05);\n    }\n\n    /* Additional embedded styles... */\n  `;\n\n  // Main widget class\n  class ToRaTechChatWidget {\n    constructor(config = {}) {\n      this.config = this.mergeConfig(config);\n      this.initialized = false;\n      this.container = null;\n      this.sessionId = this.generateSessionId();\n    }\n\n    // Merge configurations with proper precedence\n    mergeConfig(customConfig) {\n      // Priority order:\n      // 1. Runtime config passed to constructor\n      // 2. window.ChatWidgetConfig\n      // 3. Data attributes on script tag\n      // 4. Default config\n      // Note: Webhook settings are ALWAYS hardcoded and cannot be overridden\n\n      const scriptConfig = this.getScriptTagConfig();\n      const windowConfig = window[CONFIG_KEY] || {};\n\n      // Remove any webhook configuration from user inputs (security measure)\n      const cleanWindowConfig = this.removeWebhookConfig(windowConfig);\n      const cleanCustomConfig = this.removeWebhookConfig(customConfig);\n\n      // Merge all configurations, excluding webhook\n      const mergedConfig = this.deepMerge(\n        DEFAULT_CONFIG,\n        scriptConfig,\n        cleanWindowConfig,\n        cleanCustomConfig\n      );\n\n      // ALWAYS use protected webhook configuration - cannot be overridden\n      mergedConfig.webhook = TORATECH_WEBHOOK;\n\n      return mergedConfig;\n    }\n\n    // Remove webhook configuration from user input for security\n    removeWebhookConfig(config) {\n      if (!config || typeof config !== 'object') return config;\n      \n      const cleanConfig = { ...config };\n      delete cleanConfig.webhook;\n      \n      if (this.config?.advanced?.debug) {\n        console.warn('[ToRaTech Chat] Webhook configuration is managed by ToRaTech and cannot be customized');\n      }\n      \n      return cleanConfig;\n    }\n\n    // Extract config from script tag data attributes\n    getScriptTagConfig() {\n      const script = document.currentScript ||\n        document.querySelector(`script[src*=\"toratech\"][src*=\"widget\"]`);\n      \n      if (!script) return {};\n\n      const config = {\n        branding: {},\n        style: {},\n        advanced: {}\n      };\n\n      // Map data attributes to config (webhook attributes are ignored)\n      if (script.dataset.position) config.style.position = script.dataset.position;\n      if (script.dataset.primaryColor) config.style.primaryColor = script.dataset.primaryColor;\n      if (script.dataset.debug) config.advanced.debug = script.dataset.debug === 'true';\n      \n      // Warn if webhook data attributes are present (they will be ignored)\n      if (script.dataset.webhook && this.config?.advanced?.debug) {\n        console.warn('[ToRaTech Chat] data-webhook attribute is ignored. Webhook is managed by ToRaTech.');\n      }\n\n      return config;\n    }\n\n    // Deep merge utility\n    deepMerge(...objects) {\n      const result = {};\n      \n      for (const obj of objects) {\n        for (const key in obj) {\n          if (obj.hasOwnProperty(key)) {\n            if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n              result[key] = this.deepMerge(result[key] || {}, obj[key]);\n            } else {\n              result[key] = obj[key];\n            }\n          }\n        }\n      }\n      \n      return result;\n    }\n\n    // Initialize the widget\n    init() {\n      if (this.initialized) {\n        this.log('Widget already initialized');\n        return;\n      }\n\n      this.injectStyles();\n      this.createWidget();\n      this.attachEventListeners();\n      this.loadUserPreferences();\n      this.initialized = true;\n\n      this.log('Widget initialized', this.config);\n    }\n\n    // Inject styles with template interpolation\n    injectStyles() {\n      const styleId = 'toratech-chat-styles';\n      \n      if (document.getElementById(styleId)) return;\n\n      // Generate position-specific CSS\n      const positionStyle = this.config.style.position === 'left' ? 'left: 20px;' : 'right: 20px;';\n\n      const styles = WIDGET_STYLES\n        .replace(/{{primaryColor}}/g, this.config.style.primaryColor)\n        .replace(/{{secondaryColor}}/g, this.config.style.secondaryColor)\n        .replace(/{{backgroundColor}}/g, this.config.style.backgroundColor)\n        .replace(/{{fontColor}}/g, this.config.style.fontColor)\n        .replace(/{{position}}/g, this.config.style.position)\n        .replace(/{{positionStyle}}/g, positionStyle)\n        .replace(/{{zIndex}}/g, this.config.advanced.zIndex);\n\n      const styleElement = document.createElement('style');\n      styleElement.id = styleId;\n      styleElement.textContent = styles;\n      document.head.appendChild(styleElement);\n    }\n\n    // Create widget DOM structure\n    createWidget() {\n      const widgetHTML = `\n        <div class=\"toratech-chat-widget\" id=\"toratech-chat-widget\">\n          <button class=\"toratech-chat-button\" id=\"toratech-chat-button\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\">\n              <path d=\"M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM8 13C7.45 13 7 12.55 7 12C7 11.45 7.45 11 8 11C8.55 11 9 11.45 9 12C9 12.55 8.55 13 8 13ZM12 13C11.45 13 11 12.55 11 12C11 11.45 11.45 11 12 11C12.55 11 13 11.45 13 12C13 12.55 12.55 13 12 13ZM16 13C15.45 13 15 12.55 15 12C15 11.45 15.45 11 16 11C16.55 11 17 11.45 17 12C17 12.55 16.55 13 16 13Z\" fill=\"white\"/>\n            </svg>\n          </button>\n          <div class=\"toratech-chat-container\" id=\"toratech-chat-container\">\n            <!-- Chat interface will be dynamically loaded here -->\n          </div>\n        </div>\n      `;\n\n      const wrapper = document.createElement('div');\n      wrapper.innerHTML = widgetHTML;\n      document.body.appendChild(wrapper.firstElementChild);\n\n      this.container = document.getElementById('toratech-chat-container');\n    }\n\n    // Public API methods\n    open() {\n      if (this.container) {\n        this.container.classList.add('open');\n        this.loadChatInterface();\n      }\n    }\n\n    close() {\n      if (this.container) {\n        this.container.classList.remove('open');\n      }\n    }\n\n    destroy() {\n      const widget = document.getElementById('toratech-chat-widget');\n      if (widget) {\n        widget.remove();\n      }\n      \n      const styles = document.getElementById('toratech-chat-styles');\n      if (styles) {\n        styles.remove();\n      }\n\n      this.initialized = false;\n    }\n\n    // Update configuration dynamically\n    updateConfig(newConfig) {\n      this.config = this.mergeConfig(newConfig);\n      \n      if (this.initialized) {\n        this.destroy();\n        this.init();\n      }\n    }\n\n    // Utility methods\n    generateSessionId() {\n      return 'tt_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n    }\n\n    log(...args) {\n      if (this.config.advanced.debug) {\n        console.log('[ToRaTech Chat]', ...args);\n      }\n    }\n\n    // Load user preferences from localStorage\n    loadUserPreferences() {\n      try {\n        const saved = localStorage.getItem(this.config.advanced.storageKey);\n        if (saved) {\n          const prefs = JSON.parse(saved);\n          // Apply user preferences (e.g., position, theme)\n          this.log('Loaded user preferences', prefs);\n        }\n      } catch (e) {\n        this.log('Could not load user preferences', e);\n      }\n    }\n\n    // Attach event listeners\n    attachEventListeners() {\n      const button = document.getElementById('toratech-chat-button');\n      \n      button.addEventListener('click', () => {\n        const isOpen = this.container.classList.contains('open');\n        if (isOpen) {\n          this.close();\n        } else {\n          this.open();\n        }\n      });\n\n      // ESC key to close\n      document.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && this.container.classList.contains('open')) {\n          this.close();\n        }\n      });\n    }\n\n    // Load the actual chat interface (lazy loading)\n    loadChatInterface() {\n      // This is where you'd load the full chat UI\n      // Could be done via dynamic imports, iframe, or embedded HTML\n      this.log('Loading chat interface...');\n      \n      // For now, simplified version\n      this.container.innerHTML = `\n        <div class=\"toratech-chat-header\">\n          <img src=\"${this.config.branding.logo}\" alt=\"${this.config.branding.name}\" />\n          <h3>${this.config.branding.name}</h3>\n          <button class=\"toratech-chat-close\">&times;</button>\n        </div>\n        <div class=\"toratech-chat-body\">\n          <div class=\"toratech-chat-welcome\">\n            <p>${this.config.branding.welcomeText}</p>\n            <button class=\"toratech-chat-start\">Start Chat</button>\n          </div>\n        </div>\n      `;\n\n      // Add close button handler\n      const closeBtn = this.container.querySelector('.toratech-chat-close');\n      if (closeBtn) {\n        closeBtn.addEventListener('click', () => this.close());\n      }\n    }\n  }\n\n  // Auto-initialization and public API\n  const initWidget = function() {\n    // Check if widget should auto-initialize\n    const config = window[CONFIG_KEY] || {};\n    const shouldAutoInit = config.advanced?.autoInit !== false;\n\n    if (shouldAutoInit) {\n      const widget = new ToRaTechChatWidget();\n      widget.init();\n\n      // Expose public API\n      window[NAMESPACE] = {\n        version: VERSION,\n        init: (config) => {\n          widget.updateConfig(config);\n          if (!widget.initialized) {\n            widget.init();\n          }\n        },\n        open: () => widget.open(),\n        close: () => widget.close(),\n        destroy: () => widget.destroy(),\n        updateConfig: (config) => widget.updateConfig(config),\n        getConfig: () => widget.config\n      };\n    }\n  };\n\n  // Initialize when DOM is ready\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initWidget);\n  } else {\n    initWidget();\n  }\n\n})(window, document);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * ToRaTech Pop-out Chat Widget - Main Entry Point\n * @version 1.0.0\n * @license MIT\n */\n\n// Import CSS styles\nimport './widget.css';\n\n// Execute the widget code directly (since it's an IIFE, not a module)\nrequire('./toratech-widget-cdn.js');\n\n// The widget is already exposed as window.ToRaTechChat by the CDN script\n// We'll create an alias for the requested API format\nfunction initWidget(config) {\n  if (window.ToRaTechChat && window.ToRaTechChat.init) {\n    return window.ToRaTechChat.init(config);\n  } else {\n    console.error('ToRaTech Chat Widget not properly loaded');\n  }\n}\n\n// Expose the global API as requested\nwindow.MyPopoutWidget = {\n  init: initWidget,\n  // Also expose other useful methods\n  open: () => window.ToRaTechChat?.open(),\n  close: () => window.ToRaTechChat?.close(),\n  destroy: () => window.ToRaTechChat?.destroy(),\n  updateConfig: (config) => window.ToRaTechChat?.updateConfig(config),\n  getConfig: () => window.ToRaTechChat?.getConfig(),\n  version: window.ToRaTechChat?.version || '1.0.0'\n};\n\n// Export for module systems (but the main API is on window.MyPopoutWidget)\nexport default window.MyPopoutWidget;\n"],"names":["window","document","CONFIG_KEY","TORATECH_WEBHOOK","url","route","DEFAULT_CONFIG","branding","logo","name","welcomeText","responseTimeText","style","primaryColor","secondaryColor","position","backgroundColor","fontColor","advanced","autoInit","debug","zIndex","storageKey","apiVersion","ToRaTechChatWidget","config","arguments","length","undefined","_classCallCheck","this","mergeConfig","initialized","container","sessionId","generateSessionId","key","value","customConfig","scriptConfig","getScriptTagConfig","windowConfig","cleanWindowConfig","removeWebhookConfig","cleanCustomConfig","mergedConfig","deepMerge","webhook","_this$config","_typeof","cleanConfig","_objectSpread","console","warn","_this$config2","script","currentScript","querySelector","dataset","result","_len","objects","Array","_key","_i","_objects","obj","hasOwnProperty","isArray","log","injectStyles","createWidget","attachEventListeners","loadUserPreferences","styleId","getElementById","positionStyle","styles","replace","styleElement","createElement","id","textContent","head","appendChild","wrapper","innerHTML","body","firstElementChild","classList","add","loadChatInterface","remove","widget","newConfig","destroy","init","Date","now","Math","random","toString","substr","_console","_len2","args","_key2","apply","concat","saved","localStorage","getItem","prefs","JSON","parse","e","_this","addEventListener","contains","close","open","_this2","closeBtn","initWidget","_config$advanced","version","updateConfig","getConfig","readyState","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","Object","defineProperty","enumerable","get","prop","prototype","call","require","MyPopoutWidget","ToRaTechChat","error","_window$ToRaTechChat","_window$ToRaTechChat2","_window$ToRaTechChat3","_window$ToRaTechChat4","_window$ToRaTechChat5","_window$ToRaTechChat6"],"sourceRoot":""}