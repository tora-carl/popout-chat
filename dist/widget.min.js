/*! For license information please see widget.min.js.LICENSE.txt */
/*! ToRaTech Pop-out Chat Widget v1.0.0 | (c) 2025 ToRaTech | MIT License */
(()=>{var t={755:()=>{function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function e(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}!function(i,r){"use strict";var a="ChatWidgetConfig",c={url:"https://luccatora.app.n8n.cloud/webhook/e20c3a9c-8b20-4e47-82c4-61bb7207b07e/chat",route:"general"},s={branding:{logo:"https://cdn.toratech.com/assets/default-logo.png",name:"ToRaTech Support",welcomeText:"Hi there! ðŸ‘‹ How can I assist you today?",responseTimeText:"We typically respond quickly."},style:{primaryColor:"#338AFF",secondaryColor:"#2072E8",position:"right",backgroundColor:"#ffffff",fontColor:"#333333"},advanced:{autoInit:!0,debug:!1,zIndex:9999,storageKey:"toratech_chat_prefs",apiVersion:"v1"}},l=function(){return l=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=this.mergeConfig(e),this.initialized=!1,this.container=null,this.sessionId=this.generateSessionId()},d=[{key:"mergeConfig",value:function(t){var e=this.getScriptTagConfig(),n=i[a]||{},o=this.removeWebhookConfig(n),r=this.removeWebhookConfig(t),l=this.deepMerge(s,e,o,r);return l.webhook=c,l}},{key:"removeWebhookConfig",value:function(o){var i;if(!o||"object"!==n(o))return o;var r=function(n){for(var o=1;o<arguments.length;o++){var i=null!=arguments[o]?arguments[o]:{};o%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}({},o);return delete r.webhook,null!==(i=this.config)&&void 0!==i&&null!==(i=i.advanced)&&void 0!==i&&i.debug&&console.warn("[ToRaTech Chat] Webhook configuration is managed by ToRaTech and cannot be customized"),r}},{key:"getScriptTagConfig",value:function(){var t,e=r.currentScript||r.querySelector('script[src*="toratech"][src*="widget"]');if(!e)return{};var n={branding:{},style:{},advanced:{}};return e.dataset.position&&(n.style.position=e.dataset.position),e.dataset.primaryColor&&(n.style.primaryColor=e.dataset.primaryColor),e.dataset.debug&&(n.advanced.debug="true"===e.dataset.debug),e.dataset.webhook&&null!==(t=this.config)&&void 0!==t&&null!==(t=t.advanced)&&void 0!==t&&t.debug&&console.warn("[ToRaTech Chat] data-webhook attribute is ignored. Webhook is managed by ToRaTech."),n}},{key:"deepMerge",value:function(){for(var t={},e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];for(var r=0,a=o;r<a.length;r++){var c=a[r];for(var s in c)c.hasOwnProperty(s)&&("object"!==n(c[s])||Array.isArray(c[s])?t[s]=c[s]:t[s]=this.deepMerge(t[s]||{},c[s]))}return t}},{key:"init",value:function(){this.initialized?this.log("Widget already initialized"):(this.injectStyles(),this.createWidget(),this.attachEventListeners(),this.loadUserPreferences(),this.initialized=!0,this.log("Widget initialized",this.config))}},{key:"injectStyles",value:function(){var t="toratech-chat-styles";if(!r.getElementById(t)){var e="left"===this.config.style.position?"left: 20px;":"right: 20px;",n="\n    /* Critical styles embedded to avoid external CSS dependencies */\n    .toratech-chat-widget {\n      --tt-primary: var(--toratech-primary-color, {{primaryColor}});\n      --tt-secondary: var(--toratech-secondary-color, {{secondaryColor}});\n      --tt-bg: var(--toratech-bg-color, {{backgroundColor}});\n      --tt-text: var(--toratech-text-color, {{fontColor}});\n      --tt-position: {{position}};\n      \n      position: fixed;\n      bottom: 20px;\n      {{positionStyle}}\n      z-index: {{zIndex}};\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    }\n\n    .toratech-chat-widget * {\n      box-sizing: border-box;\n    }\n\n    .toratech-chat-container {\n      width: 380px;\n      height: 600px;\n      background: var(--tt-bg);\n      border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n      display: none;\n      flex-direction: column;\n      overflow: hidden;\n    }\n\n    .toratech-chat-container.open {\n      display: flex;\n    }\n\n    .toratech-chat-button {\n      width: 60px;\n      height: 60px;\n      border-radius: 30px;\n      background: var(--tt-primary);\n      border: none;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n      transition: transform 0.2s;\n    }\n\n    .toratech-chat-button:hover {\n      transform: scale(1.05);\n    }\n\n    /* Additional embedded styles... */\n  ".replace(/{{primaryColor}}/g,this.config.style.primaryColor).replace(/{{secondaryColor}}/g,this.config.style.secondaryColor).replace(/{{backgroundColor}}/g,this.config.style.backgroundColor).replace(/{{fontColor}}/g,this.config.style.fontColor).replace(/{{position}}/g,this.config.style.position).replace(/{{positionStyle}}/g,e).replace(/{{zIndex}}/g,this.config.advanced.zIndex),o=r.createElement("style");o.id=t,o.textContent=n,r.head.appendChild(o)}}},{key:"createWidget",value:function(){var t=r.createElement("div");t.innerHTML='\n        <div class="toratech-chat-widget" id="toratech-chat-widget">\n          <button class="toratech-chat-button" id="toratech-chat-button">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n              <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM8 13C7.45 13 7 12.55 7 12C7 11.45 7.45 11 8 11C8.55 11 9 11.45 9 12C9 12.55 8.55 13 8 13ZM12 13C11.45 13 11 12.55 11 12C11 11.45 11.45 11 12 11C12.55 11 13 11.45 13 12C13 12.55 12.55 13 12 13ZM16 13C15.45 13 15 12.55 15 12C15 11.45 15.45 11 16 11C16.55 11 17 11.45 17 12C17 12.55 16.55 13 16 13Z" fill="white"/>\n            </svg>\n          </button>\n          <div class="toratech-chat-container" id="toratech-chat-container">\n            \x3c!-- Chat interface will be dynamically loaded here --\x3e\n          </div>\n        </div>\n      ',r.body.appendChild(t.firstElementChild),this.container=r.getElementById("toratech-chat-container")}},{key:"open",value:function(){this.container&&(this.container.classList.add("open"),this.loadChatInterface())}},{key:"close",value:function(){this.container&&this.container.classList.remove("open")}},{key:"destroy",value:function(){var t=r.getElementById("toratech-chat-widget");t&&t.remove();var e=r.getElementById("toratech-chat-styles");e&&e.remove(),this.initialized=!1}},{key:"updateConfig",value:function(t){this.config=this.mergeConfig(t),this.initialized&&(this.destroy(),this.init())}},{key:"generateSessionId",value:function(){return"tt_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}},{key:"log",value:function(){if(this.config.advanced.debug){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=console).log.apply(t,["[ToRaTech Chat]"].concat(n))}}},{key:"loadUserPreferences",value:function(){try{var t=localStorage.getItem(this.config.advanced.storageKey);if(t){var e=JSON.parse(t);this.log("Loaded user preferences",e)}}catch(t){this.log("Could not load user preferences",t)}}},{key:"attachEventListeners",value:function(){var t=this;r.getElementById("toratech-chat-button").addEventListener("click",(function(){t.container.classList.contains("open")?t.close():t.open()})),r.addEventListener("keydown",(function(e){"Escape"===e.key&&t.container.classList.contains("open")&&t.close()}))}},{key:"loadChatInterface",value:function(){var t=this;this.log("Loading chat interface..."),this.container.innerHTML='\n        <div class="toratech-chat-header">\n          <img src="'.concat(this.config.branding.logo,'" alt="').concat(this.config.branding.name,'" />\n          <h3>').concat(this.config.branding.name,'</h3>\n          <button class="toratech-chat-close">&times;</button>\n        </div>\n        <div class="toratech-chat-body">\n          <div class="toratech-chat-welcome">\n            <p>').concat(this.config.branding.welcomeText,'</p>\n            <button class="toratech-chat-start">Start Chat</button>\n          </div>\n        </div>\n      ');var e=this.container.querySelector(".toratech-chat-close");e&&e.addEventListener("click",(function(){return t.close()}))}}],d&&o(l.prototype,d),h&&o(l,h),Object.defineProperty(l,"prototype",{writable:!1}),l;var l,d,h}(),d=function(){var t;if(!1!==(null===(t=(i[a]||{}).advanced)||void 0===t?void 0:t.autoInit)){var e=new l;e.init(),i.ToRaTechChat={version:"1.0.0",init:function(t){e.updateConfig(t),e.initialized||e.init()},open:function(){return e.open()},close:function(){return e.close()},destroy:function(){return e.destroy()},updateConfig:function(t){return e.updateConfig(t)},getConfig:function(){return e.config}}}};"loading"===r.readyState?r.addEventListener("DOMContentLoaded",d):d()}(window,document)}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o={};(()=>{"use strict";var t;n.d(o,{default:()=>e}),n(755),window.MyPopoutWidget={init:function(t){if(window.ToRaTechChat&&window.ToRaTechChat.init)return window.ToRaTechChat.init(t);console.error("ToRaTech Chat Widget not properly loaded")},open:function(){var t;return null===(t=window.ToRaTechChat)||void 0===t?void 0:t.open()},close:function(){var t;return null===(t=window.ToRaTechChat)||void 0===t?void 0:t.close()},destroy:function(){var t;return null===(t=window.ToRaTechChat)||void 0===t?void 0:t.destroy()},updateConfig:function(t){var e;return null===(e=window.ToRaTechChat)||void 0===e?void 0:e.updateConfig(t)},getConfig:function(){var t;return null===(t=window.ToRaTechChat)||void 0===t?void 0:t.getConfig()},version:(null===(t=window.ToRaTechChat)||void 0===t?void 0:t.version)||"1.0.0"};const e=window.MyPopoutWidget})(),window.MyPopoutWidget=o.default})();
//# sourceMappingURL=widget.min.js.map